[Script Info]
; Script generated by Aegisub 2.1.9
; http://www.aegisub.org/
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
PlayResX: 1280
PlayResY: 720
ScaledBorderAndShadow: yes
Last Style Storage: Default
Video File: ?dummy:30.000000:9000:1280:720:0:0:0:c
Video Aspect Ratio: 0
Video Zoom: 4
Video Position: 0
Export Encoding: UTF-8
Export filters: Karaoke template

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: trans-furigana,Arial,15,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,1.5,1.5,3,15,75,8,1
Style: hangul-furigana,Malgun Gothic,15,&H0019D0CE,&H000000FF,&H00FFFFFF,&H00000000,-1,0,0,0,100,100,0,0,1,1,0,7,75,15,45,1
Style: Default-furigana,Arial,15,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,1.5,1.5,2,19,19,15,1
Style: Default,Arial,30,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,3,3,2,19,19,15,1
Style: hangul,Malgun Gothic,40,&H0019D0CE,&H000000FF,&H00245E64,&H00000000,-1,0,0,0,100,100,0,0,1,2,0,7,75,15,30,1
Style: furigana,Arial,30,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,3,3,3,15,75,45,1
Style: trans,Arial,30,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,3,3,3,15,75,8,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:00.00,0:00:00.00,Default,▼CODE LINES▼,0000,0000,0000,,
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code syl all,fxgroup.firstsyl = (syl.i == 1)
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,infinite = {[1] = {0,0},[2] = {6,-10},[3] = {14,-12},[4] = {24,-4},[5] = {36,12},[6] = {50,22},[7] = {70,24},[8] = {82,14},[9] = {98,2},[10] = {100,-14},[11] = {94,-18},[12] = {76,-18},[13] = {60,-14},[14] = {50,-6},[15] = {26,6},[16] = {14,16},[17] = {0,12},[18] = {0,0}}
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,temp = {} function set_temp(ref,val) temp[ref] = val return val end
Comment: 0,0:00:00.00,0:00:00.00,Default,Get Scr Resolution,0000,0000,0000,code once,xres, yres = _G.aegisub.video_size() ratio = meta.res_y/576  if (xres and xres ~= meta.res_x) or (yres and yres ~= meta.res_y) then _G.aegisub.debug.out(2, "Warning: script resolution %dx%d does not match with loaded video resolution %dx%d resample script resolution(menu>subtitles>resample resolution>click from video)", meta.res_x, meta.res_y, xres, yres) end
Comment: 0,0:00:00.00,0:00:00.00,Default,Get Frame Dur,0000,0000,0000,code once,msa = _G.aegisub.ms_from_frame(1) msb = _G.aegisub.ms_from_frame(100) if msa == nil and msb == nil then _G.aegisub.debug.out(2, "Warning: Please load the video or use dummy video.Frame duration was provisionally set to 33 milliseconds. ") frame_dur = 33  else frame_dur = (msb-msa)/100 end
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,x = {} y = {} temp = {} pos_xx = {} pos_yy = {} end_t = {} xx = {0,6,14,24,36,50,70,82,98,100,94,76,60,50,26,14,0,0} yy = {0,-10,-12,-4,12,22,24,14,2,-14,-18,-18,-14,-6,6,16,12,0}
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,max_space = 2.5
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code syl all,t = 0 pos_x = syl.center pos_y = line.middle
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,shape = "m 20 0 b -7 0 -7 41 20 41 b 48 41 48 0 20 0"
Comment: 0,0:00:00.00,0:00:00.00,Default,Infinite Effects Function,0000,0000,0000,code once,function Bezier_Move(s_time,e_time,aftimg_dur,x_blur,y_blur,acl,...) a = {...} if (j == 1) then t1 = s_time t2 = e_time dur = t2-t1 accel = acl n = #a/2 for i = 1,n*2-1,2 do x[(i+1)/2] = a[i]  end for i = 2, n*2,2 do y[i/2] = a[i]  end  c_t = 0 maxloop(2) f_t = 1/(dur/frame_dur) end afterimage_dur = aftimg_dur if (afterimage_dur < 0 ) then afterimage_dur = 0 end pos_x, pos_y = Bezier(n,x,y,c_t) pos_xx[j], pos_yy[j] = Bezier(n,xx,yy,c_t) n_t = c_t + f_t n_x, n_y = Bezier(n,x,y,n_t) dist = math.sqrt(math.abs(n_x-pos_x)^2+math.abs(n_y-pos_y)^2) a_t =f_t*(max_space/dist) if (a_t > f_t) then a_t = f_t end n_t = c_t + a_t if (n_t < 1) then maxj = j + 1 end end_t[j] = t1+dur*(n_t^accel)+afterimage_dur retime("line",-100+t1+dur*(c_t^accel),0) t = c_t c_t = n_t loop_c = maxj xx = x yy = y return string.format("\\move(%f,%f,%f,%f,%d,%d)",pos_x,pos_y,pos_x,pos_y,0,500) end function Bezier(n,x,y,t) p_x = 0 p_y = 0 for i = 1, n, 1 do p_y = p_y + y[i] * set_temp("bern",bernstein(i-1,n-1,t)) p_x = p_x + x[i] * temp.bern  end return p_x, p_y end function bernstein(i,n,t) return (factk(n) / (factk(i)*factk(n-i))) * (t^i) * ((1-t)^(n-i)) end function factk(n) k = 1 if (n > 1) then for i = 2, n, 1 do k = k * i end end return k end
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,function tags(dur,t,j) tag = "\\alpha&HFF&" time  = t/2*dur while time < dur do tag = tag..string.format("\\t(%d,%d,\\alpha&H00&\\3c%s\\bord%f\\blur%f)\\t(%d,%d,\\alpha&HFF&\\3c&HFFFFFF&\\bord%f\\blur%f)",time,time+500,(j == 1) and set_temp("color",_G.ass_color(_G.HSV_to_RGB(math.random(360),0.5,1))) or temp.color,3*ratio,3*ratio,time+600,time+900,1*ratio,2*ratio) time = time + 1200 end return tag end
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,code once,function autotags2(miniscale,maxscale) tag = "" i = 1 while i <= #line.kara do if line.kara[i].text_stripped ~= "" or line.kara[i].text_stripped ~= " " or line.kara[i].text_stripped ~= "　" then tag = tag..string.format("\\t(%d,%d,\\fscy%d)\\t(%d,%d,\\fscy%d)",line.kara[i].start_time-100-(t1+dur*(c_t^accel)),line.kara[i].start_time-(t1+dur*(c_t^accel)),math.random(0,maxscale)*ratio,line.kara[i].start_time-(t1+dur*(c_t^accel)),i == #line.kara and line.kara[i].end_time-(t1+dur*(c_t^accel))+500 or line.kara[i].end_time-(t1+dur*(c_t^accel)),math.random(0,miniscale)*ratio) end i = i +1 end return tag end
Dialogue: 0,0:00:00.00,0:00:00.00,Default,▼TEMPLATE LINES▼,0000,0000,0000,,
Dialogue: 0,0:00:00.00,0:00:00.00,Default,▼Hangun▼,0000,0000,0000,,
Comment: 2,0:00:00.00,0:00:00.00,hangul,text lead-in,0000,0000,0000,template,!retime("start2syl",-300,0)!{\an5\pos($center,$middle)\fad(150,0)}
Comment: 3,0:00:00.00,0:00:00.00,hangul,text high light,0000,0000,0000,template,!retime("syl",0,$si==$syln and -150 or 0)!{\an5\pos($center,$middle)\t(0,!frame_dur!,\1c&HFFFFFF&\3c&HFFFFFF&\fscx120\fscy120)\t(!frame_dur!,!line.duration!,\1c!line.styleref.color1!\3c!line.styleref.color3!\fscx100\fscy100)}
Comment: 1,0:00:00.00,0:00:00.00,hangul,text high light bg border,0000,0000,0000,template,!retime("syl",0,$si==$syln and -150 or 200)!{\an5\pos($center,$middle)\1a&HFF&\4a&HFF&\t(0,!frame_dur!,\3c&HFFFFFF&\bord!6*ratio!\blur!4*ratio!)\t(!frame_dur!,!line.duration!,\bord!line.styleref.outline!\blur0)}
Comment: 3,0:00:00.00,0:00:00.00,hangul,text lead-out,0000,0000,0000,template,!retime("syl2end",-150,0)!{\an5\pos($center,$middle)\fad(0,150)}
Comment: 0,0:00:00.00,0:00:00.00,hangul,Infinite,0000,0000,0000,template noblank notext fxgroup firstsyl,{!Bezier_Move(-500,0,$ldur,0,0,0.5,infinite[1][1]*line.width/80+line.left,infinite[1][2]+line.middle,infinite[2][1]*line.width/80+line.left,infinite[2][2]*4+line.middle,infinite[3][1]*line.width/80+line.left,infinite[3][2]*4+line.middle,infinite[4][1]*line.width/80+line.left,infinite[4][2]*4+line.middle,infinite[5][1]*line.width/80+line.left,infinite[5][2]*4+line.middle,infinite[6][1]*line.width/80+line.left,infinite[6][2]*4+line.middle,infinite[7][1]*line.width/80+line.left,infinite[7][2]*4+line.middle,infinite[8][1]*line.width/80+line.left,infinite[8][2]*4+line.middle,infinite[9][1]*line.width/80+line.left,infinite[9][2]*4+line.middle,infinite[10][1]*line.width/80+line.left,infinite[10][2]*4+line.middle,infinite[11][1]*line.width/80+line.left,infinite[11][2]*4+line.middle,infinite[12][1]*line.width/80+line.left,infinite[12][2]*4+line.middle,infinite[13][1]*line.width/80+line.left,infinite[13][2]*4+line.middle,infinite[14][1]*line.width/80+line.left,infinite[14][2]*4+line.middle,infinite[15][1]*line.width/80+line.left,infinite[15][2]*4+line.middle,infinite[16][1]*line.width/80+line.left,infinite[16][2]*4+line.middle,infinite[17][1]*line.width/80+line.left,infinite[17][2]*4+line.middle,infinite[18][1]*line.width/80+line.left,infinite[18][2]+line.middle)!\fad(300,300)\an2\fscx!7*ratio!\fscy!7*ratio!\bord!1*ratio!\1c&HFFFFFF&\3c&HFFFFFF&\shad0\blur!2*ratio!!tags(line.duration,t,j)!\p1}!shape!
Dialogue: 0,0:00:00.00,0:00:00.00,Default,▼KARAOKE LINES▼,0000,0000,0000,,
Dialogue: 0,0:00:00.00,0:00:00.00,Default,▼Hangul▼,0000,0000,0000,,



